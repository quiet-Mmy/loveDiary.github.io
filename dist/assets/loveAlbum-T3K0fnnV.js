import{d as T,x as z,y as P,r as h,z as ct,c as D,A as ut,B as dt,j as C,o as y,f as A,F as k,s as ot,g as x,C as ft,D as mt,G as vt,m as ht,i as N,H as V,e as w,h as p,I as gt,_ as rt}from"./index-C7SrcRmC.js";function _t(t){return ut()?(dt(t),!0):!1}const it=typeof window<"u";function pt(t,e){function o(...n){t(()=>e.apply(this,n),{fn:e,thisArg:this,args:n})}return o}function yt(t,e={}){let o,n;return a=>{const i=C(t),s=C(e.maxWait);if(o&&clearTimeout(o),i<=0||s!==void 0&&s<=0)return n&&(clearTimeout(n),n=null),a();s&&!n&&(n=setTimeout(()=>{o&&clearTimeout(o),n=null,a()},s)),o=setTimeout(()=>{n&&clearTimeout(n),n=null,a()},i)}}function wt(t,e=200,o={}){return pt(yt(e,o),t)}function bt(t){var e;const o=C(t);return(e=o==null?void 0:o.$el)!=null?e:o}const At=it?window:void 0,B=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},G="__vueuse_ssr_handlers__";B[G]=B[G]||{};var F=Object.getOwnPropertySymbols,Ot=Object.prototype.hasOwnProperty,It=Object.prototype.propertyIsEnumerable,$t=(t,e)=>{var o={};for(var n in t)Ot.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(t!=null&&F)for(var n of F(t))e.indexOf(n)<0&&It.call(t,n)&&(o[n]=t[n]);return o};function xt(t,e,o={}){const n=o,{window:r=At}=n,a=$t(n,["window"]);let i;const s=r&&"ResizeObserver"in r,l=()=>{i&&(i.disconnect(),i=void 0)},c=P(()=>bt(t),u=>{l(),s&&r&&u&&(i=new ResizeObserver(e),i.observe(u,a))},{immediate:!0,flush:"post"}),m=()=>{l(),c()};return _t(m),{isSupported:s,stop:m}}var W,H;it&&(window!=null&&window.navigator)&&((W=window==null?void 0:window.navigator)!=null&&W.platform)&&/iP(ad|hone|od)/.test((H=window==null?void 0:window.navigator)==null?void 0:H.platform);const Et=({breakpoints:t,wrapperWidth:e,gutter:o,hasAroundGutter:n,initWidth:r})=>{const a=Object.keys(t).map(c=>Number(c)).sort((c,m)=>c-m);let i=e,s=!1;for(const c of a)if(e<=c){i=c,s=!0;break}if(!s)return r;const l=t[i].rowPerView;return n?(e-o)/l-o:(e-(l-1)*o)/l};function St(t){const e=h(0),o=h(null);xt(o,i=>{const s=i[0],{width:l}=s.contentRect;e.value=l});const n=D(()=>Et({wrapperWidth:e.value,breakpoints:t.breakpoints,gutter:t.gutter,hasAroundGutter:t.hasAroundGutter,initWidth:t.width})),r=D(()=>{const i=t.hasAroundGutter?-t.gutter:t.gutter;return Math.floor((e.value+i)/(n.value+t.gutter))}),a=D(()=>{if(t.align==="left")return 0;if(t.align==="center"){const i=t.hasAroundGutter?t.gutter:-t.gutter,s=r.value*(n.value+t.gutter)+i;return(e.value-s)/2}else{const i=t.hasAroundGutter?t.gutter:-t.gutter,s=r.value*(n.value+t.gutter)+i;return e.value-s}});return{waterfallWrapper:o,wrapperWidth:e,colWidth:n,cols:r,offsetX:a}}function at(t,e){return new RegExp(`(^|\\s)${e}(\\s|$)`).test(t.className)}function M(t,e){if(at(t,e))return;const o=t.className.split(/\s+/);o.push(e),t.className=o.join(" ")}const Ct=document.createElement("div").style,R=(()=>{const t={standard:"transform",webkit:"webkitTransform",Moz:"MozTransform",O:"OTransform",ms:"msTransform"};for(const e in t){const o=t[e];if(Ct[o]!==void 0)return e}return!1})();function E(t){return R===!1?!1:R==="standard"?t:R+t.charAt(0).toUpperCase()+t.substr(1)}const U=E("transform"),K=E("animation-duration"),X=E("animation-delay"),Y=E("transition"),Q=E("animation-fill-mode");function Nt(t,e,o,n,r){const a=h([]),i=h(0),s=u=>{const d=t.hasAroundGutter?u+1:u;return t.gutter*d+e.value*u+n.value},l=()=>{a.value=new Array(o.value).fill(t.hasAroundGutter?t.gutter:0)},c=zt(t);return{wrapperHeight:i,layoutHandle:async()=>new Promise(u=>{l();const d=[];if(r&&r.value&&r.value.childNodes.forEach(_=>{_.className==="waterfall-item"&&d.push(_)}),d.length===0)return!1;for(let _=0;_<d.length;_++){const f=d[_],g=Math.min.apply(null,a.value),O=a.value.indexOf(g),I=s(O),v=f.style;U&&(v[U]=`translate3d(${I}px,${g}px, 0)`),v.width=`${e.value}px`,v.visibility="visible";const{height:S}=f.getBoundingClientRect();a.value[O]+=S+t.gutter,c(f,()=>{const j=t.posDuration/1e3;Y&&(v[Y]=`transform ${j}s`)})}i.value=Math.max.apply(null,a.value),setTimeout(()=>{u(!0)},t.posDuration)})}}function zt(t){return(e,o)=>{const n=e.firstChild;if(n&&!at(n,t.animationPrefix)){const r=`${t.animationDuration/1e3}s`,a=`${t.animationDelay/1e3}s`,i=n.style;M(n,t.animationPrefix),M(n,t.animationEffect),K&&(i[K]=r),X&&(i[X]=a),Q&&(i[Q]="both"),o&&setTimeout(()=>{o()},t.animationDuration+t.animationDelay)}}}const Dt=typeof window<"u"&&window!==null,q=Tt(),Rt=Object.prototype.propertyIsEnumerable,J=Object.getOwnPropertySymbols;function kt(t,...e){return e.map(n=>n.replace(/\[(\w+)\]/g,".$1").split(".").reduce((r,a)=>r&&r[a],t))}function Tt(){return Dt&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype?("isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get(){return this.intersectionRatio>0}}),!0):!1}function $(t){return typeof t=="function"||toString.call(t)==="[object Object]"}function Pt(t){return typeof t=="object"?t===null:typeof t!="function"}function Lt(t){return t!=="__proto__"&&t!=="constructor"&&t!=="prototype"}function jt(t,...e){if(!$(t))throw new TypeError("expected the first argument to be an object");if(e.length===0||typeof Symbol!="function"||typeof J!="function")return t;for(const o of e){const n=J(o);for(const r of n)Rt.call(o,r)&&(t[r]=o[r])}return t}function st(t,...e){let o=0;for(Pt(t)&&(t=e[o++]),t||(t={});o<e.length;o++)if($(e[o])){for(const n of Object.keys(e[o]))Lt(n)&&($(t[n])&&$(e[o][n])?st(t[n],e[o][n]):t[n]=e[o][n]);jt(t,e[o])}return t}function Z(t,e){return new Promise((o,n)=>{const r=new Image;r.onload=()=>{o(r)},r.onerror=()=>{n(new Error("Image load error"))},e&&(r.crossOrigin="Anonymous"),r.src=t})}var b;(function(t){t.LOADING="loading",t.LOADED="loaded",t.ERROR="error"})(b||(b={}));const Vt={rootMargin:"0px",threshold:0},tt="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Bt="";class Gt{constructor(e=!0,o,n=!0){this.lazyActive=!0,this.crossOrigin=!0,this.options={loading:tt,error:Bt,observerOptions:Vt,log:!0,ratioCalculator:(r,a)=>a/r},this._images=new WeakMap,this.lazyActive=e,this.crossOrigin=n,this.config(o)}config(e={}){st(this.options,e),e.ratioCalculator&&(this.options.ratioCalculator=e.ratioCalculator)}mount(e,o,n){const{src:r,loading:a,error:i}=this._valueFormatter(o);e.setAttribute("lazy",b.LOADING),e.setAttribute("src",a||tt),this.lazyActive?(q||(this._setImageSrc(e,r,n,i),this._log(()=>{throw new Error("Not support IntersectionObserver!")})),this._initIntersectionObserver(e,r,n,i)):this._setImageSrc(e,r,n,i)}resize(e,o){const n=e.getAttribute("lazy"),r=e.getAttribute("src");n&&n===b.LOADED&&r&&Z(r,this.crossOrigin).then(a=>{const{width:i,height:s}=a,l=e.width/i*s;e.height=l;const c=e.style;c.height=`${l}px`,o()})}unmount(e){const o=this._realObserver(e);o&&o.unobserve(e),this._images.delete(e)}_setImageSrc(e,o,n,r){!o||e.getAttribute("src")===o||Z(o,this.crossOrigin).then(i=>{var s,l;const{width:c,height:m}=i,u=((l=(s=this.options).ratioCalculator)==null?void 0:l.call(s,c,m))||m/c,d=e.parentNode.parentNode;d.style.paddingBottom=`${u*100}%`,e.setAttribute("lazy",b.LOADED),e.removeAttribute("src"),e.setAttribute("src",o),n(!0)}).catch(()=>{const i=this._realObserver(e);i&&i.disconnect(),r&&(e.setAttribute("lazy",b.ERROR),e.setAttribute("src",r),n(!1)),this._log(()=>{throw new Error(`Image failed to load!And failed src was: ${o} `)})})}_isOpenLazy(){return q&&this.lazyActive}_initIntersectionObserver(e,o,n,r){const a=this.options.observerOptions;this._images.set(e,new IntersectionObserver(s=>{Array.prototype.forEach.call(s,l=>{if(l.isIntersecting){const c=this._realObserver(e);c&&c.unobserve(l.target),this._setImageSrc(e,o,n,r)}})},a));const i=this._realObserver(e);i&&i.observe(e)}_valueFormatter(e){let o=e,n=this.options.loading,r=this.options.error;return $(e)&&(o=e.src,n=e.loading||this.options.loading,r=e.error||this.options.error),{src:o,loading:n,error:r}}_log(e){this.options.log&&e()}_realObserver(e){return this._images.get(e)}}var Ft=(t,e)=>{for(const[o,n]of e)t[o]=n;return t};const L=T({props:{list:{type:Array,default:()=>[]},rowKey:{type:String,default:"id"},imgSelector:{type:String,default:"src"},width:{type:Number,default:200},breakpoints:{type:Object,default:()=>({1200:{rowPerView:3},800:{rowPerView:2},500:{rowPerView:1}})},gutter:{type:Number,default:10},hasAroundGutter:{type:Boolean,default:!0},posDuration:{type:Number,default:300},animationPrefix:{type:String,default:"animate__animated"},animationEffect:{type:String,default:"fadeIn"},animationDuration:{type:Number,default:1e3},animationDelay:{type:Number,default:300},backgroundColor:{type:String,default:"#fff"},lazyload:{type:Boolean,default:!0},loadProps:{type:Object,default:()=>{}},crossOrigin:{type:Boolean,default:!0},delay:{type:Number,default:300},align:{type:String,default:"center"}},setup(t,e){const o=new Gt(t.lazyload,t.loadProps,t.crossOrigin);z("lazy",o);const{waterfallWrapper:n,wrapperWidth:r,colWidth:a,cols:i,offsetX:s}=St(t),{wrapperHeight:l,layoutHandle:c}=Nt(t,a,i,s,n),m=wt(()=>{c().then(()=>{e.emit("afterRender")})},t.delay);P(()=>[r,a,t.list],()=>{r.value>0&&m()},{deep:!0});const u=h(0);return z("sizeChangeTime",u),z("imgLoaded",m),{waterfallWrapper:n,wrapperHeight:l,getRenderURL:f=>kt(f,t.imgSelector)[0],getKey:(f,g)=>f[t.rowKey]||g,renderer:m}}}),et=()=>{ct(t=>({"84adae44":t.backgroundColor}))},nt=L.setup;L.setup=nt?(t,e)=>(et(),nt(t,e)):et;const Wt=L,Ht={class:"waterfall-card"};function Mt(t,e,o,n,r,a){return y(),A("div",{ref:"waterfallWrapper",class:"waterfall-list",style:mt({height:`${t.wrapperHeight}px`})},[(y(!0),A(k,null,ot(t.list,(i,s)=>(y(),A("div",{key:t.getKey(i,s),class:"waterfall-item"},[x("div",Ht,[ft(t.$slots,"item",{item:i,index:s,url:t.getRenderURL(i)},void 0,!0)])]))),128))],4)}var Ut=Ft(Wt,[["render",Mt],["__scopeId","data-v-6d3e5303"]]);const Kt=["onClick"],Xt={class:"flex"},Yt=T({__name:"waterFalls",props:{activeName:{}},setup(t){const e=h(!1),o=h(!0),n=h([]),r=h(0),a=h(0),i=h(20),s=t,l=h({1200:{rowPerView:3},800:{rowPerView:2},500:{rowPerView:1}});P(()=>s.activeName,()=>{o.value=!0,n.value=[],a.value=0,m()});const c=()=>{console.log("handleImg")},m=()=>{console.log(s.activeName,"props.activeName"),o.value&&s.activeName&&s.activeName!==void 0&&(e.value=!0,a.value++,fetch(`https://www.mrwan.top/api/get_list?page=${a.value}&limit=${i.value}&type=${s.activeName}`).then(d=>d.json()).then(d=>{n.value.length==0?(n.value=d.data,r.value=d.total):n.value=n.value.concat(d.data),n.value&&n.value.length>=r.value&&(o.value=!1),e.value=!1}).catch(d=>{e.value=!1}))},u=(d,_)=>{let f=new Image;f.setAttribute("crossOrigin","anonymous"),f.onload=function(){let g=document.createElement("canvas");g.width=f.width,g.height=f.height,g.getContext("2d").drawImage(f,0,0,f.width,f.height);let I=g.toDataURL("image/png"),v=document.createElement("a"),S=new MouseEvent("click");v.download=_||"img",v.href=I,v.dispatchEvent(S)},f.src=d};return(d,_)=>{const f=w("el-image"),g=w("el-button"),O=V("loading"),I=V("infinite-scroll");return vt((y(),ht(C(Ut),{"infinite-scroll-delay":500,list:n.value,style:{width:"100%"},gutter:20,width:246,breakpoints:l.value,posDuration:300,"infinite-scroll-distance":50},{item:N(({item:v,img_url:S,index:j})=>[x("div",{class:"card box",onClick:lt=>c(v)},[p(f,{src:v.img_url,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":[v.img_url],"initial-index":0,fit:"cover","preview-teleported":!0,"z-index":3e3,"hide-on-click-modal":!0},null,8,["src","preview-src-list"]),x("div",Xt,[p(g,{type:"primary",onClick:lt=>u(v.img_url,v.describe+"-"+v.created_time)},{default:N(()=>[gt("下载")]),_:2},1032,["onClick"])])],8,Kt)]),_:1},8,["list","breakpoints"])),[[O,e.value],[I,m]])}}}),Qt=rt(Yt,[["__scopeId","data-v-125c83ba"]]),qt={class:"header"},Jt={class:"box-c"},Zt=T({__name:"loveAlbum",setup(t){const e=h(),o=h([]),n=(a,i)=>{};return(()=>{fetch("https://www.mrwan.top/api/get_type").then(a=>a.json()).then(a=>{o.value=a.data,e.value=a.data[0].type}).catch(a=>{})})(),(a,i)=>{const s=w("el-tab-pane"),l=w("el-tabs"),c=w("el-affix"),m=w("el-backtop");return y(),A(k,null,[x("div",qt,[p(c,{offset:0,class:"contaner"},{default:N(()=>[p(l,{modelValue:e.value,"onUpdate:modelValue":i[0]||(i[0]=u=>e.value=u),class:"tabs",onTabClick:n},{default:N(()=>[(y(!0),A(k,null,ot(o.value,(u,d)=>(y(),A("div",{key:u.type},[p(s,{label:u.type,name:u.type},null,8,["label","name"])]))),128))]),_:1},8,["modelValue"])]),_:1})]),x("div",Jt,[p(Qt,{activeName:e.value},null,8,["activeName"]),p(m,{right:100,bottom:300})])],64)}}}),ee=rt(Zt,[["__scopeId","data-v-d4db078e"]]);export{ee as default};
